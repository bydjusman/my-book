"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[818],{376(e,i,n){n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"module-1-ros2/nodes-topics-services","title":"Nodes, Topics, and Services","description":"Understanding the communication patterns in ROS 2","source":"@site/docs/module-1-ros2/nodes-topics-services.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/nodes-topics-services","permalink":"/docs/module-1-ros2/nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/bydjusman/my-book/edit/main/docs/module-1-ros2/nodes-topics-services.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Nodes, Topics, and Services","description":"Understanding the communication patterns in ROS 2"},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Role in Physical AI","permalink":"/docs/module-1-ros2/concepts"},"next":{"title":"Connecting AI Agents to ROS Controllers","permalink":"/docs/module-1-ros2/ai-ros-integration"}}');var o=n(4848),r=n(8453);const t={sidebar_position:3,title:"Nodes, Topics, and Services",description:"Understanding the communication patterns in ROS 2"},c="Nodes, Topics, and Services in ROS 2",a={},l=[{value:"Understanding ROS 2 Communication Patterns",id:"understanding-ros-2-communication-patterns",level:2},{value:"Nodes: The Building Blocks",id:"nodes-the-building-blocks",level:2},{value:"What are Nodes?",id:"what-are-nodes",level:3},{value:"Node Characteristics",id:"node-characteristics",level:3},{value:"Node Lifecycle",id:"node-lifecycle",level:3},{value:"Creating Nodes",id:"creating-nodes",level:3},{value:"Topics: Publish-Subscribe Communication",id:"topics-publish-subscribe-communication",level:2},{value:"How Topics Work",id:"how-topics-work",level:3},{value:"Topic Characteristics",id:"topic-characteristics",level:3},{value:"Common Topic Use Cases in Humanoid Robotics",id:"common-topic-use-cases-in-humanoid-robotics",level:3},{value:"Quality of Service (QoS) Configuration",id:"quality-of-service-qos-configuration",level:3},{value:"Services: Request-Response Communication",id:"services-request-response-communication",level:2},{value:"How Services Work",id:"how-services-work",level:3},{value:"Service Characteristics",id:"service-characteristics",level:3},{value:"Common Service Use Cases in Humanoid Robotics",id:"common-service-use-cases-in-humanoid-robotics",level:3},{value:"Actions: Goal-Based Communication",id:"actions-goal-based-communication",level:2},{value:"Common Action Use Cases in Humanoid Robotics",id:"common-action-use-cases-in-humanoid-robotics",level:3},{value:"Practical Example: AI-Agent to Robot Communication",id:"practical-example-ai-agent-to-robot-communication",level:2},{value:"Perception Loop (Topics)",id:"perception-loop-topics",level:3},{value:"Planning and Control Loop (Topics and Services)",id:"planning-and-control-loop-topics-and-services",level:3},{value:"High-Level Orchestration (Services and Actions)",id:"high-level-orchestration-services-and-actions",level:3},{value:"Quality of Service (QoS) Settings",id:"quality-of-service-qos-settings",level:2},{value:"Reliability Policy",id:"reliability-policy",level:3},{value:"Durability Policy",id:"durability-policy",level:3},{value:"History Policy",id:"history-policy",level:3},{value:"Best Practices for Communication Design",id:"best-practices-for-communication-design",level:2},{value:"Design Principles",id:"design-principles",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Safety and Reliability",id:"safety-and-reliability",level:3},{value:"Debugging and Monitoring Communication",id:"debugging-and-monitoring-communication",level:2},{value:"Command Line Tools",id:"command-line-tools",level:3},{value:"Visualization Tools",id:"visualization-tools",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"nodes-topics-and-services-in-ros-2",children:"Nodes, Topics, and Services in ROS 2"})}),"\n",(0,o.jsx)(i.h2,{id:"understanding-ros-2-communication-patterns",children:"Understanding ROS 2 Communication Patterns"}),"\n",(0,o.jsx)(i.p,{children:"ROS 2 implements three primary communication patterns that enable different types of interaction between robotic software components. Understanding these patterns is crucial for developing effective Physical AI systems that can coordinate complex behaviors."}),"\n",(0,o.jsx)(i.p,{children:"The communication architecture in ROS 2 handles the diverse needs of robotic systems, from real-time sensor data streaming to reliable command execution. Each communication pattern serves specific purposes and has its own advantages and trade-offs. The architecture provides a flexible framework for humanoid robotics applications."}),"\n",(0,o.jsx)(i.p,{children:"ROS 2's communication patterns are built on the Data Distribution Service (DDS) standard, which provides the underlying infrastructure for distributed communication. This ensures that the communication is both reliable and performant for real-time robotic systems."}),"\n",(0,o.jsx)(i.p,{children:"DDS provides key capabilities that make it ideal for robotics:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Discovery"}),": Automatic discovery of nodes and their communication interfaces"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Quality of Service (QoS)"}),": Configurable policies for reliability and history"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Data Centricity"}),": Focus on the data being communicated rather than applications"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Real-time Performance"}),": Optimized for time-critical applications"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"nodes-the-building-blocks",children:"Nodes: The Building Blocks"}),"\n",(0,o.jsx)(i.h3,{id:"what-are-nodes",children:"What are Nodes?"}),"\n",(0,o.jsx)(i.p,{children:"Nodes are the fundamental execution units in ROS 2. Each node is a process that performs computation and communicates with other nodes. Think of nodes as specialized organs in the robotic nervous system, each responsible for a specific function:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Sensor nodes"}),": Collect data from cameras, LIDAR, IMUs, etc."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Controller nodes"}),": Execute control algorithms for robot joints"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Perception nodes"}),": Process sensor data to recognize objects or understand the environment"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Planning nodes"}),": Generate motion plans or high-level action sequences"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Behavior nodes"}),": Implement high-level behaviors like walking or grasping"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"node-characteristics",children:"Node Characteristics"}),"\n",(0,o.jsx)(i.p,{children:"Nodes in ROS 2 have important characteristics:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Language agnostic"}),": Nodes can be written in any supported language (C++, Python, etc.) and still communicate seamlessly"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Process isolation"}),": Each node runs in its own process, providing fault tolerance"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Lifecycle management"}),": Nodes can be configured with different lifecycle states (unconfigured, inactive, active, finalized)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Namespaces"}),": Nodes can be organized into namespaces to avoid naming conflicts"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Parameters"}),": Nodes can be configured through parameters set at launch time or runtime"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"node-lifecycle",children:"Node Lifecycle"}),"\n",(0,o.jsx)(i.p,{children:"ROS 2 provides a lifecycle management system that allows nodes to transition between different states:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Unconfigured"}),": Node has been created but not yet configured"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Inactive"}),": Node is configured but not executing"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Active"}),": Node is executing and participating in communication"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Finalized"}),": Node has been shut down and resources have been released"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"This lifecycle system is important for safety-critical robotic systems where proper initialization and shutdown procedures are essential."}),"\n",(0,o.jsx)(i.h3,{id:"creating-nodes",children:"Creating Nodes"}),"\n",(0,o.jsx)(i.p,{children:"Nodes are created by inheriting from the Node class in your chosen programming language. The node constructor requires a name, and optionally a namespace and context. Once created, nodes can create publishers, subscribers, services, and other communication interfaces."}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MyNode(Node):\r\n    def __init__(self):\r\n        super().__init__('my_node_name')\r\n\r\n        # Create communication interfaces\r\n        self.publisher = self.create_publisher(String, 'topic_name', 10)\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'topic_name',\r\n            self.callback,\r\n            10)\r\n\r\n        # Create timer\r\n        self.timer = self.create_timer(0.1, self.timer_callback)\r\n\r\n        # Declare parameters\r\n        self.declare_parameter('param_name', 'default_value')\r\n\r\n    def callback(self, msg):\r\n        self.get_logger().info(f'Received: {msg.data}')\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = 'Hello World'\r\n        self.publisher.publish(msg)\n"})}),"\n",(0,o.jsx)(i.h2,{id:"topics-publish-subscribe-communication",children:"Topics: Publish-Subscribe Communication"}),"\n",(0,o.jsx)(i.h3,{id:"how-topics-work",children:"How Topics Work"}),"\n",(0,o.jsx)(i.p,{children:"Topics implement a publish-subscribe communication pattern. In this pattern:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Publishers"})," send messages to a topic"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Subscribers"})," receive messages from a topic"]}),"\n",(0,o.jsxs)(i.li,{children:["Communication is ",(0,o.jsx)(i.strong,{children:"asynchronous"})," and ",(0,o.jsx)(i.strong,{children:"non-blocking"})]}),"\n",(0,o.jsx)(i.li,{children:"Multiple publishers and subscribers can exist for the same topic"}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"This pattern is well-suited for streaming data where the publisher doesn't need to know who is receiving the data, and subscribers don't need to know who is publishing. It enables loose coupling between different parts of the robotic system."}),"\n",(0,o.jsx)(i.h3,{id:"topic-characteristics",children:"Topic Characteristics"}),"\n",(0,o.jsx)(i.p,{children:"Topics are ideal for streaming data like sensor readings or robot states because:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Real-time"}),": Messages are sent as soon as they're available"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Broadcast"}),": Multiple subscribers can receive the same data simultaneously"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Decoupled"}),": Publishers and subscribers don't need to know about each other"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Lossy"}),": If a subscriber isn't ready, messages may be lost (configurable with QoS settings)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Scalable"}),": New subscribers can join without affecting publishers"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"common-topic-use-cases-in-humanoid-robotics",children:"Common Topic Use Cases in Humanoid Robotics"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/joint_states"}),": Current positions, velocities, and efforts of robot joints"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/camera/image_raw"}),": Raw image data from robot cameras"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/imu/data"}),": Inertial measurement unit readings"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/tf"}),": Transform data representing the relationship between different robot frames"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/cmd_vel"}),": Velocity commands for robot base movement"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/scan"}),": LIDAR range data for obstacle detection"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/odom"}),": Odometry data for position tracking"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"quality-of-service-qos-configuration",children:"Quality of Service (QoS) Configuration"}),"\n",(0,o.jsx)(i.p,{children:"When creating publishers and subscribers, you can configure QoS settings to match your application's requirements:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy\r\n\r\n# For critical control commands - reliable delivery\r\ncontrol_qos = QoSProfile(\r\n    depth=10,\r\n    reliability=ReliabilityPolicy.RELIABLE,\r\n    history=HistoryPolicy.KEEP_LAST\r\n)\r\n\r\n# For high-frequency sensor data - best effort\r\nsensor_qos = QoSProfile(\r\n    depth=1,\r\n    reliability=ReliabilityPolicy.BEST_EFFORT,\r\n    history=HistoryPolicy.KEEP_LAST\r\n)\r\n\r\n# Create publisher with custom QoS\r\nself.control_publisher = self.create_publisher(\r\n    Twist,\r\n    '/cmd_vel',\r\n    qos_profile=control_qos\r\n)\n"})}),"\n",(0,o.jsx)(i.h2,{id:"services-request-response-communication",children:"Services: Request-Response Communication"}),"\n",(0,o.jsx)(i.h3,{id:"how-services-work",children:"How Services Work"}),"\n",(0,o.jsx)(i.p,{children:"Services implement a request-response communication pattern. In this pattern:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["A ",(0,o.jsx)(i.strong,{children:"client"})," sends a request to a ",(0,o.jsx)(i.strong,{children:"server"})]}),"\n",(0,o.jsxs)(i.li,{children:["The ",(0,o.jsx)(i.strong,{children:"server"})," processes the request and sends back a response"]}),"\n",(0,o.jsxs)(i.li,{children:["Communication is ",(0,o.jsx)(i.strong,{children:"synchronous"})," and ",(0,o.jsx)(i.strong,{children:"blocking"})]}),"\n",(0,o.jsxs)(i.li,{children:["There's a clear ",(0,o.jsx)(i.strong,{children:"one-to-one"})," relationship between client and server"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Services are appropriate for operations that require guaranteed delivery and a specific response. Unlike topics, services ensure that the client receives a response to their request."}),"\n",(0,o.jsx)(i.h3,{id:"service-characteristics",children:"Service Characteristics"}),"\n",(0,o.jsx)(i.p,{children:"Services are appropriate for operations that require:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Guaranteed delivery"}),": The client knows when the server has processed the request"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Immediate results"}),": The client receives a response with the result"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"State changes"}),": Operations that change system state or require acknowledgment"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Task completion"}),": Operations that have a clear beginning and end"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Configuration"}),": Setting parameters or system states"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"common-service-use-cases-in-humanoid-robotics",children:"Common Service Use Cases in Humanoid Robotics"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/get_joint_positions"}),": Retrieve current joint positions"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/set_joint_positions"}),": Command specific joint positions"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/get_robot_state"}),": Retrieve comprehensive robot state"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/load_map"}),": Load a navigation map from file"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/save_calibration"}),": Save sensor calibration data"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/set_parameters"}),": Update system parameters at runtime"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/reset_robot"}),": Reset robot to a known state"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/enable_motors"}),": Enable or disable robot motors"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"actions-goal-based-communication",children:"Actions: Goal-Based Communication"}),"\n",(0,o.jsx)(i.p,{children:"Actions represent a third communication pattern in ROS 2 that's important for humanoid robotics:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Goal"}),": A request with a long-running execution"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Feedback"}),": Continuous updates during execution"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Result"}),": Final outcome when the goal is completed"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Actions are perfect for tasks like:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Moving the robot to a specific location"}),"\n",(0,o.jsx)(i.li,{children:"Grasping an object"}),"\n",(0,o.jsx)(i.li,{children:"Walking to a target"}),"\n",(0,o.jsx)(i.li,{children:"Executing a complex manipulation sequence"}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Actions combine the best of both topics and services, providing the asynchronous nature of topics with the guaranteed completion of services."}),"\n",(0,o.jsx)(i.h3,{id:"common-action-use-cases-in-humanoid-robotics",children:"Common Action Use Cases in Humanoid Robotics"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/move_base"}),": Navigate to a specified location"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/pick_and_place"}),": Pick up an object and place it elsewhere"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/follow_path"}),": Follow a predefined path"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/speech_synthesis"}),": Synthesize and speak a text phrase"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/object_detection"}),": Detect and classify objects in a scene"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"practical-example-ai-agent-to-robot-communication",children:"Practical Example: AI-Agent to Robot Communication"}),"\n",(0,o.jsx)(i.p,{children:"Consider how an AI agent might communicate with a humanoid robot using these patterns:"}),"\n",(0,o.jsx)(i.h3,{id:"perception-loop-topics",children:"Perception Loop (Topics)"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"AI Perception Node \u2192 subscribes to \u2192 /camera/image_raw\r\n                    subscribes to \u2192 /lidar/scan\r\n                    subscribes to \u2192 /imu/data\r\n                    publishes to  \u2192 /detected_objects\r\n                    publishes to  \u2192 /environment_map\n"})}),"\n",(0,o.jsx)(i.h3,{id:"planning-and-control-loop-topics-and-services",children:"Planning and Control Loop (Topics and Services)"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"AI Planning Node \u2192 subscribes to \u2192 /detected_objects\r\n                   subscribes to \u2192 /environment_map\r\n                   publishes to  \u2192 /motion_plan\r\n                   publishes to  \u2192 /arm_controller/commands\r\n                   calls service \u2192 /set_navigation_parameters\n"})}),"\n",(0,o.jsx)(i.h3,{id:"high-level-orchestration-services-and-actions",children:"High-Level Orchestration (Services and Actions)"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"AI Manager Node \u2192 calls action   \u2192 /move_to_location\r\n                  calls action   \u2192 /grasp_object\r\n                  calls service  \u2192 /get_robot_status\r\n                  calls service  \u2192 /reset_robot\n"})}),"\n",(0,o.jsx)(i.h2,{id:"quality-of-service-qos-settings",children:"Quality of Service (QoS) Settings"}),"\n",(0,o.jsx)(i.p,{children:"ROS 2 provides QoS settings that allow you to tune communication behavior:"}),"\n",(0,o.jsx)(i.h3,{id:"reliability-policy",children:"Reliability Policy"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Reliable"}),": All messages are delivered (like TCP)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Best Effort"}),": Messages may be lost (like UDP)"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Critical sensor data and control commands should use reliable delivery, while high-frequency sensor data might use best effort."}),"\n",(0,o.jsx)(i.h3,{id:"durability-policy",children:"Durability Policy"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Transient Local"}),": Late-joining subscribers receive the last message"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Volatile"}),": Late-joining subscribers receive no historical messages"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Useful for state information that new nodes need immediately."}),"\n",(0,o.jsx)(i.h3,{id:"history-policy",children:"History Policy"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Keep Last"}),": Store the specified number of most recent messages"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Keep All"}),": Store all messages (limited by memory)"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Controls how many messages are kept in the queue."}),"\n",(0,o.jsx)(i.h2,{id:"best-practices-for-communication-design",children:"Best Practices for Communication Design"}),"\n",(0,o.jsx)(i.p,{children:"When designing communication patterns for Physical AI systems:"}),"\n",(0,o.jsx)(i.h3,{id:"design-principles",children:"Design Principles"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Use topics for streaming data"})," like sensor readings and state updates"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Use services for discrete operations"})," that require acknowledgment"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Use actions for long-running tasks"})," with feedback"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Consider real-time requirements"})," when choosing QoS settings"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Design message types carefully"})," to minimize communication overhead"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Minimize message size"}),": Only include necessary data in messages"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Optimize message frequency"}),": Balance between information freshness and system load"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Use appropriate QoS settings"}),": Match communication requirements to system needs"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"safety-and-reliability",children:"Safety and Reliability"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Implement timeouts"}),": Prevent indefinite waiting for responses"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Handle failures gracefully"}),": Provide fallback behaviors when communication fails"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Validate data"}),": Check message contents for reasonableness"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"debugging-and-monitoring-communication",children:"Debugging and Monitoring Communication"}),"\n",(0,o.jsx)(i.p,{children:"ROS 2 provides tools for monitoring and debugging communication:"}),"\n",(0,o.jsx)(i.h3,{id:"command-line-tools",children:"Command Line Tools"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"ros2 topic list"}),": Show all active topics"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"ros2 topic echo <topic_name>"}),": Display messages on a topic"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"ros2 service list"}),": Show all available services"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"ros2 node info <node_name>"}),": Show node's communication interfaces"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"visualization-tools",children:"Visualization Tools"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"RViz"}),": Real-time visualization of robot state and sensor data"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"rqt"}),": Graphical tools for monitoring topics and services"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"ros2 bag"}),": Recording and playback of message data for analysis"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(i.p,{children:"Nodes, topics, and services form the foundation of communication in ROS 2. Understanding these patterns is essential for developing AI systems that can effectively communicate with robotic hardware. The publish-subscribe model of topics is ideal for streaming sensor data, while the request-response model of services is perfect for discrete operations requiring confirmation. The goal-based model of actions is ideal for long-running tasks that require feedback during execution."}),"\n",(0,o.jsx)(i.p,{children:"These communication patterns enable the complex coordination required for humanoid robots to operate effectively in the physical world. By properly designing communication interfaces and selecting appropriate QoS settings, you can create robust and efficient robotic systems that meet the demanding requirements of Physical AI applications."}),"\n",(0,o.jsx)(i.p,{children:"In the next section, we'll explore how to connect Python AI agents specifically to ROS controllers using rclpy."})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,i,n){n.d(i,{R:()=>t,x:()=>c});var s=n(6540);const o={},r=s.createContext(o);function t(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);